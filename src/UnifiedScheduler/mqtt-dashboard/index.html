<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unified Scheduler Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/mqtt@5.3.0/dist/mqtt.min.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <h1>ðŸ“š Unified Book Scheduler Dashboard</h1>
      <div class="connection-status">
        <span class="badge" id="status">disconnected</span>
      </div>
    </header>

    <!-- MQTT Connection -->
    <section class="card">
      <h2>MQTT Connection</h2>
      <div class="form-group">
        <label>Broker URL:</label>
        <input type="text" id="url" value="ws://localhost:9001" placeholder="ws://localhost:9001">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Username (optional):</label>
          <input type="text" id="user" placeholder="username">
        </div>
        <div class="form-group">
          <label>Password (optional):</label>
          <input type="password" id="pass" placeholder="password">
        </div>
      </div>
      <button id="connect" class="btn btn-primary">Connect</button>
    </section>

    <!-- Create Order -->
    <section class="card">
      <h2>Create Order</h2>
      <div class="form-row">
        <div class="form-group">
          <label>Title:</label>
          <input type="text" id="orderTitle" value="The Art of Scheduling" placeholder="Book Title">
        </div>
        <div class="form-group">
          <label>Author:</label>
          <input type="text" id="orderAuthor" value="Anders Risager" placeholder="Author Name">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Pages:</label>
          <input type="number" id="orderPages" value="200" min="1">
        </div>
        <div class="form-group">
          <label>Cover Type:</label>
          <select id="orderCoverType">
            <option value="hardcover">Hardcover</option>
            <option value="softcover">Softcover</option>
          </select>
        </div>
        <div class="form-group">
          <label>Paper Type:</label>
          <select id="orderPaperType">
            <option value="glossy">Glossy</option>
            <option value="matte">Matte</option>
          </select>
        </div>
        <div class="form-group">
          <label>Quantity:</label>
          <input type="number" id="orderQuantity" value="10" min="1">
        </div>
      </div>
      <button id="createOrderBtn" class="btn btn-success">Create Order</button>
      <div id="currentOrder" class="current-order"></div>
    </section>

    <!-- Queue Status -->
    <section class="card">
      <h2>Job Queue Status</h2>
      <div id="queueStatus" class="queue-status">
        <div class="queue-item">
          <span class="queue-label">Job A (Printing):</span>
          <span id="queueA" class="queue-count">-</span>
        </div>
        <div class="queue-item">
          <span class="queue-label">Job B (Cover):</span>
          <span id="queueB" class="queue-count">-</span>
        </div>
        <div class="queue-item">
          <span class="queue-label">Job C (Binding):</span>
          <span id="queueC" class="queue-count">-</span>
        </div>
        <div class="queue-item">
          <span class="queue-label">Job D (Packaging):</span>
          <span id="queueD" class="queue-count">-</span>
        </div>
      </div>
    </section>

    <!-- Machine Status -->
    <section class="card">
      <h2>Machine Status</h2>
      <div id="machineGrid" class="machine-grid">
        <div class="muted">No machines detected. Connect to MQTT broker and wait for heartbeats...</div>
      </div>
    </section>

    <!-- Console -->
    <section class="card">
      <h2>Console</h2>
      <div id="console" class="console"></div>
    </section>
  </div>

  <script src="app.js"></script>
</body>

</html>